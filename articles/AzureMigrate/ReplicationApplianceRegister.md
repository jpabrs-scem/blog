---
title: Azure Migrate レプリケーション アプライアンスのデプロイについて
date: 2022-08-11 12:00:00
tags:
  - Azure Migrate
  - how to
disableDisclaimer: false
---

<!-- more -->
こんにちは! ABRS チームの 朴 です。
今回は Azure Migrate のエージェント ベースシナリオ上、レプリケーション アプライアンスをデプロイする際の注意事項についてご説明させていただきます。


## 目次
-----------------------------------------------------------
[1. Azure Migrate エージェント ベース シナリオ上、レプリケーション アプライアンスの要件について](#1)

[2. Azure Migrate エージェント ベース シナリオ上、レプリケーション アプライアンスのデプロイが失敗する場合](#2)
   
   [  2.1 Azure Migrate エージェント ベース シナリオ上、レプリケーション アプライアンス マシンの OS 言語が英語ではない場合](#2-1)
   
   [  2.2 レプリケーション アプライアンス マシンの NIC が英語以外の言語で記載される場合](#2-2)

[3. Azure Migrate エージェント ベース シナリオ上、レプリケーション アプライアンスについてよく聞かれる質問について](#3)

-----------------------------------------------------------


## <a id="1"></a> 1. Azure Migrate エージェント ベース シナリオ上、レプリケーション アプライアンスの要件について
公開情報) https://learn.microsoft.com/ja-jp/azure/migrate/migrate-replication-appliance

上記公開情報では、オペレーティング システムを [Windows Server 2016 または Windows Server 2012 R2] と記載しておりますが、
**[Windows Server 2016] のみのご利用**をお願い致します。

なお、公開情報のレプリケーション アプライアンスの要件は最小要件となっております。
そのため、オンプレミス環境のサーバーが上記要件を満たさない場合、サポート対象外となっていることをご了承ください。

## <a id="2"></a> 2. Azure Migrate エージェント ベース シナリオ上、レプリケーション アプライアンスのデプロイが失敗する場合について

### <a id="2-1"></a> 2-1 Azure Migrate エージェント ベース シナリオ上、レプリケーション アプライアンス マシンの OS 言語が英語ではない場合
レプリケーション アプライアンスの要件として、オペレーティング システムのロケールは **英語 (en-us)** となり、必須となっております。
こちらの要件は、Windows OS インストール時にご選択いただく言語が対象となります。

Windows OS をインストールする際に日本語を選択してセットアップを完了した後、ロケールやリージョンを英語 (en-us) に変更したが下記エラー メッセージにてセットアップ作業を継続することができないといったお問い合わせをいただくことがありますが、
これは Windows OS インストール時に英語以外の言語を選択したことが原因となっております。

＝エラー メッセージの例＝

Microsoft Azure Site Recovery Unified Setup is unable to proceed as the Operating System locale selected on this computer is not English.
Recommended Action : Run setup on a computer with Operating system locale selected as English.

＝ここまで＝

弊社開発部門では、レプリケーション アプライアンスのシステム ロケールをインストール時に英語 (en-us) として選択後デプロイしたマシンでの動作確認を実施しております。

Microsoft Azure Site Recovery Unified Setup のインストーラーを実行するマシンにおいて**英語以外の言語でデプロイされたマシンのロケールやリージョンを後から英語に変更する操作は、弊社開発部門の検証時には想定がされていない操作**でございます。

つきましては、レプリケーション アプライアンスをデプロイされる際は、インストール時の言語設定を "英語 (en-us)" にご指定いただいた上で、Windows OS のインストールとアプライアンスの構築作業を実施いただきますようお願い申し上げます。

### <a id="2-1"></a> 2-2 レプリケーション アプライアンス マシンの NIC が英語以外の言語で記載される場合
オンプレミス環境にてレプリケーション アプライアンス マシンをデプロイする場合、**英語以外の言語で NIC 名が利用**される場合がございます。 
ご利用のレプリケーション アプライアンス にてネットワークインターフェイス (NIC) 情報を確認するためには、以下のコマンドをご利用ください。

1. レプリケーション アプライアンス マシンにサインインし、管理者権限から PowerShell を開きます。
2. 以下コマンドからご利用の ネットワークインターフェイス (NIC) 情報を確認します。

Get-NetAdapter | Format-List -Property *

公開情報) https://learn.microsoft.com/ja-jp/powershell/module/netadapter/get-netadapter?view=windowsserver2022-ps

## <a id="3"></a> 3. Azure Migrate エージェント ベース シナリオ上、レプリケーション アプライアンスについてよく聞かれる質問について
### <a id="3-1"></a> 3-1 Azure Migrate エージェント ベース シナリオ上、Azure 上にレプリケーション アプライアンスをデプロイして利用してもよいか。
技術的には、Azure 上にレプリケーション アプライアンスをデプロイして利用することは可能でございます。
しかし、1. でご案内致しました最小要件に加え、以下レプリケーション プロセスが上手く行われる必要がございます。

ご利用のオンプレミス環境のレプリケーション アプライアンスと Azure サービス間、移行対象の VM とレプリケーション アプライアンス間で以下のレプリケーション プロセスが上手く行われるかは、弊社といたしては正確な情報提供が難しくなっております。
そのため、Azure 上でレプリケーション アプライアンスをデプロイして利用することをご検討の場合、必ず、PoC など動作検証を行って頂く必要がございます。

![image](https://github.com/jpabrs-scem/blog/assets/141316175/a6ddfe2e-5ddb-4247-be68-4626a72210c1)















本記事の内容は以上となります。
